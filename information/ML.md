# Реализованные функции ML

## **perform_pca**
```R
perform_pca <- function(commits, scale = TRUE) {
  ... 
  return(pca_data)
}
```
Функция выполняет PCA-анализ данных о коммитах, включая предварительную обработку, создание dummy-переменных и агрегацию по авторам коммитов.

Особенности обработки:
- Создает dummy-переменные для категориальных признаков (repo, status, branch)
- Определяет расширения файлов из имен файлов
- Агрегирует данные по коммитам (суммирует изменения)
- Автоматически удаляет столбцы с нулевой дисперсией
- Добавляет расстояние до центра в пространстве PCA

Входные данные:
- `commits` - датафрейм с данными о коммитах. Должен содержать колонки:
   - `id` - уникальный идентификатор коммита
   - `author` - автор коммита
   - `filename` - имя файла
   - `patch` - diff-патч изменений
   - `additions` - количество добавленных строк
   - `deletions` - количество удаленных строк
   - `changes` - общее количество изменений
   - `repo` - репозиторий
   - `status` - статус изменения (added, modified, etc.)
   - `branch` - ветка
- `scale` - Логическое значение, указывающее нужно ли масштабировать данные перед выполнением PCA (по умолчанию TRUE)

Выходные данные: 
- `pca_data` - датафрейм с исходными метаданными и результатами PCA, содержащий:
   - `id` - уникальный идентификатор коммита
   - `author` - автор коммита
   - `patches` - объединенные патчи всех изменений в коммите
   - `PC1, PC2, ...` - значения главных компонент
   - `distance` - евклидово расстояние до центра в пространстве PCA

## **detect_outliers**
```R
detect_outliers <- function(pca_data, threshold = 2) {
  ...
  return(outliers)
}
```

Функция идентифицирует выбросы в данных о коммитах на основе расстояния до центра в пространстве главных компонент (PCA) с использованием Z-метода.

Методология:
- Вычисляет Z-оценки для расстояний в пространстве PCA
- Использует стандартное отклонение для определения порога аномальности
- Возвращает полную информацию о выбросах для дальнейшего анализа

Входные данные: 
- `pca_data` - датафрейм с результатами PCA, полученный из `perform_pca()`. Должен содержать колонку `distance` (евклидово расстояние в пространстве PCA).
- `threshold` -  числовой порог для определения выбросов (по умолчанию 2). Значения расстояния, превышающие `threshold` стандартных отклонений от среднего, считаются аномальными.

Выходные данные: 
- `outliers` - датафрейм с обнаруженными аномальными коммитами, содержащий:
   - `id` - уникальный идентификатор коммита
   - `author` - автор коммита
   - `distance` - евклидово расстояние в пространстве PCA
   - `z_score` - стандартизированное значение расстояния (Z-оценка)
   - `patches` - объединенные патчи изменений